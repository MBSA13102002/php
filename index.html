<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <title>OTP VERIFICATION</title>
</head>
<style>
    html,
    body {
        height: 100%;
    }

    body {
        display: flex;
        align-items: center;
        padding-top: 40px;
        padding-bottom: 40px;
        background-color: #e4d8d8;
    }

    .form-signin {
        width: 100%;
        max-width: 330px;
        padding: 15px;
        margin: auto;
        border:2px solid black;
        border-radius: 20px;
    }

    .form-signin .checkbox {
        font-weight: 400;
    }

    .form-signin .form-floating:focus-within {
        z-index: 2;
    }

    .form-signin input[type="email"] {
        margin-bottom: -1px;
        border-bottom-right-radius: 0;
        border-bottom-left-radius: 0;
    }

    .form-signin input[type="password"] {
        margin-bottom: 10px;
        
        border-top-left-radius: 0;
        border-top-right-radius: 0;
    }

    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
    }

    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }
</style>


<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-auth.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyBpKn4xsWRlER61p2m8FvgJw2XHZaQYnHI",
    authDomain: "otp-verfication-31865.firebaseapp.com",
    projectId: "otp-verfication-31865",
    storageBucket: "otp-verfication-31865.appspot.com",
    messagingSenderId: "670459591682",
    appId: "1:670459591682:web:8b9b3da65534664b68bb1b",
    measurementId: "G-L42NFZ0H1Q"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
  window.onload=function(){
    render();
};
function render(){
    window.recaptchaVerifier=new firebase.auth.RecaptchaVerifier('recaptcha-container');
    recaptchaVerifier.render()
}
function phoneAuth(number){
    //var number=document.getElementById('number').value;
    //console.log(number)
    firebase.auth().signInWithPhoneNumber(number,window.recaptchaVerifier).then(function(confirmationResult){
       window.confirmationResult = confirmationResult;
       codeResult=confirmationResult;
       console.log(codeResult);
       alert("message sent")
    }).catch(function(error){
        alert(error.message);
    })
}
function codeVerify(){
    var code=document.getElementById('verificationCode').value;
    codeResult.confirm(code).then(function(result){
        alert("OTP CONFIRMED");
    }).catch(function(error){
        alert(error.message);
    })
}
</script>
<script>
    function otp(){
    
        number =  document.getElementById('number').value
         if(number == ''){
            
        }
        else{
            document.getElementById("otp").style.display="block";
            document.getElementById("send_otp").style.display="none";
            phoneAuth(number)
        }

    } 
</script>
<body class="text-center">

    <main class="form-signin">
        <form >
            <img class="mb-4" src="/logo.jpg" alt="" width="250" height="250" style="border-radius:200px;"> 
            <h1 class="h3 mb-3 fw-normal">MBSA FORM</h1>

            <div class="form-floating">
                <input type="text" class="form-control my-1" id="floatingInput" placeholder="name@example.com" required>
                <label for="floatingInput">NAME</label>
            </div>
            <div class="form-floating">
                <input type="text" class="form-control my-1"  placeholder="Password" required>
                <label for="floatingPassword">EMAIL ID</label>
            </div>
            <div class="form-floating">
                <input type="text" class="form-control my-1" id='number' placeholder="+91**********" required>
                <label for="floatingPassword">MOBILE NUMBER</label>
            </div>
            <div id="recaptcha-container"></div>
            <button class="w-100 btn btn-lg btn-primary my-3" id="send_otp" onclick="otp()">SEND OTP</button>
            <br>
            <div class="form-floating" id="otp" style="display: none;">
                <input type="text" class="form-control" id='verificationCode' placeholder="Password" required>
                <label for="floatingPassword">ENTER OTP</label>
            </div>
            <button class="w-100 btn btn-lg btn-primary my-3" onclick="codeVerify()">CONFIRM OTP</button>

            <button class="w-100 btn btn-lg btn-primary my-5" type="submit">SEND</button>
            <p class="mt-5 mb-3 text-muted">&copy; 2020â€“2021</p>
        </form>
    </main>



</body>

</html>