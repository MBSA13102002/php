<!DOCTYPE html>
<html>

<head>
    <title>Getting Clients IP</title>
    <style>
        p,
        h1 {
            color: green;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>
    <!-- ============================================================================================ -->
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-database.js"></script>
    <!-- ===================================================================================================== -->
    <script>
        /* Add "https://api.ipify.org?format=json" statement
           this will communicate with the ipify servers in
           order to retrieve the IP address $.getJSON will
           load JSON-encoded data from the server using a
           GET HTTP request */

        $.getJSON("https://api.ipify.org?format=json",
            function (data) {

                // Setting text of element P with id gfg
                localStorage.setItem("lastname", data.ip);
                document.getElementById("ip").innerHTML = localStorage.getItem("lastname");
            })
        var firebaseConfig = {
            apiKey: "AIzaSyBASO7i-hKMq7lJs7b7KVQqUWXuwICIruo",
            authDomain: "hackilo-edutech-traffic.firebaseapp.com",
            projectId: "hackilo-edutech-traffic",
            storageBucket: "hackilo-edutech-traffic.appspot.com",
            messagingSenderId: "943999356770",
            appId: "1:943999356770:web:83d61c9cc23037468ae63b",
            measurementId: "G-3MWH1TC61L"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        let formMessage = firebase.database().ref("clients-ip")
        function send() {
            $.getJSON("https://api.ipify.org?format=json",
                function (data) {
                    formMessage.push({
                        ip: data.ip
                        
                    })

                })

        }
    </script>
</head>

<body onload="send()">
    <center>
        <h1>GeeksforGeeks</h1>
        <h3>Public IP Address of user is:</h3>

        <p id="ip"></p>
       <!-- <button onclick="send()">SEND TO FIREBASE</button> -->


    </center>
</body>

</html>
